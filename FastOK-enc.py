import base64
exec(base64.b64decode("IyBGdWxsIE9wZW4gU291cmNlIENvZGUKIyBDb2RlZCBCeSBAR0YtRWxpdGUKIyBodHRwczovL3d3dy5mYWNlYm9vay5jb20va2F3aWRpYW50YXJhLjUwCiMgaHR0cHM6Ly9naXRodWIuY29tL0pFV0VMRlVORFMKCiMgICBSZWxlYXNlIERhdGUgOiBKdW0sMTEgRmViLDIwMjIKIyAgIFNpbXBsZSBMb29rLCBFYXN5IFRvIFVuZGVyc3RhbmQKIyAgIEVhc3kgVG8gVXNlIOKckwojICAgRnJlZSBGb3IgVXNlIOKckwoKaW1wb3J0IHJlcXVlc3RzLGJzNCxqc29uLG9zLHN5cyxyYW5kb20sZGF0ZXRpbWUsdGltZQoKdHJ5OgoJaW1wb3J0IHJpY2gKZXhjZXB0IEltcG9ydEVycm9yOgoJb3Muc3lzdGVtKCdwaXAgaW5zdGFsbCByaWNoJykKCXRpbWUuc2xlZXAoMSkKCXRyeToKCQlpbXBvcnQgcmljaAoJZXhjZXB0IEltcG9ydEVycm9yOgoJCWV4aXQoJ1RpZGFrIERhcGF0IE1lbmdpbnN0YWxsIE1vZHVsZSByaWNoLCBDb2JhIEluc3RhbGwgTWFudWFsIChwaXAgaW5zdGFsbCByaWNoKScpCgpmcm9tIHJpY2gudGFibGUgaW1wb3J0IFRhYmxlIGFzIG1lCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBDb25zb2xlIGFzIHNvbApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyB0cmVkCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBHcm91cCBhcyBncApmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsIGFzIG5lbApmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIGNldGFrCmZyb20gcmljaC5tYXJrZG93biBpbXBvcnQgTWFya2Rvd24gYXMgbWFyawpmcm9tIHJpY2guY29sdW1ucyBpbXBvcnQgQ29sdW1ucyBhcyBjb2wKCiMgVUEgTElTVAp0cnk6dWdlbiA9IG9wZW4oJ3VzZXIudHh0JywncicpLnJlYWRsaW5lcygpCmV4Y2VwdDp1Z2VuID0gWydNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMi4zLjQ7IHB0LXB0OyBTb255RXJpY3Nzb25MVDE4YSBCdWlsZC80LjAuMS5BLjAuMjY2KSBBcHBsZVdlYktpdC81MzMuMSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTMzLjEnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4yLjE7IHJ1LXJ1OyA5OTMwaSBCdWlsZC9KT1A0MEQpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTM0LjMwJywnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDIuMy40OyBydS1ydTsgTUlEIEJ1aWxkL0dSSjIyKSBBcHBsZVdlYktpdC81MzMuMSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIE1vYmlsZSBTYWZhcmkvNTMzLjEnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4zOyBlbi11czsgQVNVU19UMDBKIEJ1aWxkL0pTUzE1USkgQXBwbGVXZWJLaXQvNTM0LjMwIChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuMzAnLCdNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4yLjI7IHJ1LXJ1OyBGbHkgSVE0NDA0IEJ1aWxkL0pEUTM5KSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCBZYW5kZXhTZWFyY2gvNy4xNiddCgojIElORElDQVRJT04KaWQsaWQyLGxvb3Asb2ssY3AsYWt1bixvcHJlayxtZXRob2QgPSBbXSxbXSwwLDAsMCxbXSxbXSxbXQoKIyBDT0xPUlMKeCA9ICdcMzNbbScgIyBERUZBVUxUCmsgPSAnXDAzM1s5M20nICMgS1VOSU5HICsKaCA9ICdceDFiWzE7OTJtJyAjIEhJSkFVICsKaGggPSAnXDAzM1szMm0nICMgSElKQVUgLQp1ID0gJ1wwMzNbOTVtJyAjIFVOR1UKa2sgPSAnXDAzM1szM20nICMgS1VOSU5HIC0KYiA9ICdcMzNbMTs5Nm0nICMgQklSVSAtCnAgPSAnXHgxYlswOzM0bScgIyBCSVJVICsKCiMgQ29udmVydGVyIEJ1bGFuCmRpYyA9IHsnMSc6J0phbnVhcmknLCcyJzonRmVicnVhcmknLCczJzonTWFyZXQnLCc0JzonQXByaWwnLCc1JzonTWVpJywnNic6J0p1bmknLCc3JzonSnVsaScsJzgnOidBZ3VzdHVzJywnOSc6J1NlcHRlbWJlcicsJzEwJzonT2t0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0Rlc2VtYmVyJ30KZGljMiA9IHsnMDEnOidKYW51YXJpJywnMDInOidGZWJydWFyaScsJzAzJzonTWFyZXQnLCcwNCc6J0FwcmlsJywnMDUnOidNZWknLCcwNic6J0p1bmknLCcwNyc6J0p1bGknLCcwOCc6J0FndXN0dXMnLCcwOSc6J1NlcHRlbWJlcicsJzEwJzonT2t0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0Rlc2VtYmVyJ30KdGdsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuZGF5CmJsbiA9IGRpY1soc3RyKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLm1vbnRoKSldCnRobiA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnllYXIKb2tjID0gJ09LLScrc3RyKHRnbCkrJy0nK3N0cihibG4pKyctJytzdHIodGhuKSsnLnR4dCcKY3BjID0gJ0NQLScrc3RyKHRnbCkrJy0nK3N0cihibG4pKyctJytzdHIodGhuKSsnLnR4dCcKCiMgQ0xFQVIKZGVmIGNsZWFyKCk6Cglvcy5zeXN0ZW0oJ2NsZWFyJykKCiMgQkFDSwpkZWYgYmFjaygpOgoJbG9naW4oKQoKIyBCQU5ORVIKZGVmIGJhbm5lcigpOgoJY2xlYXIoKQoJd2VsID0gJyMgV0VMQ09NRSBUTyBGQUNFQk9PSyBKRVdFTCBUT09MUyAxMksnCgl3ZWwyID0gbWFyayh3ZWwsIHN0eWxlPSdjeWFuJykKCXNvbCgpLnByaW50KHdlbDIsIHN0eWxlPSdvbiByZWQnKQoJaXNlID0gJyMgSU5GT1JNQVNJIFBFTkdFTUJBTkcnCglmYyA9IG1hcmsoaXNlLCBzdHlsZT0nZ3JlZW4nKQoJc29sKCkucHJpbnQoZmMpCgl0YXAgPSBtZSgpCgl0YXAuYWRkX2NvbHVtbignQXV0aG9yJywgc3R5bGU9J2dyZWVuJywganVzdGlmeT0nY2VudGVyJykKCXRhcC5hZGRfY29sdW1uKCdHaXRodWInLCBzdHlsZT0nZ3JlZW4nLCBqdXN0aWZ5PSdjZW50ZXInKQoJdGFwLmFkZF9yb3coJ0dGLUVsaXRlJywnaHR0cHM6Ly9naXRodWIuY29tL0pFV0VMRlVORCcpCglzb2woKS5wcmludCh0YXAsIGp1c3RpZnk9J2NlbnRlcicpCgojIFRPS0VOIFZBTElEQVRJT04KZGVmIGxvZ2luKCk6Cgl0cnk6CgkJdG9rZW4gPSBvcGVuKCd0b2tlbi50eHQnLCdyJykucmVhZCgpCgkJdHJ5OgoJCQlzeSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScrdG9rZW4pCgkJCXN5MiA9IGpzb24ubG9hZHMoc3kudGV4dClbJ25hbWUnXQoJCQlzeTMgPSBqc29uLmxvYWRzKHN5LnRleHQpWydpZCddCgkJCXN5NCA9IGpzb24ubG9hZHMoc3kudGV4dClbJ2JpcnRoZGF5J10KCQkJbWVudShzeTIsc3kzLHN5NCkKCQlleGNlcHQgS2V5RXJyb3I6CgkJCWxvZ2luX2xhZ2koKQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJYmFubmVyKCkKCQkJbGkgPSAnIyBLT05FS1NJIElOVEVSTkVUIEJFUk1BU0FMQUgsIFBFUklLU0EgJiBDT0JBIExBR0knCgkJCWxvID0gbWFyayhsaSwgc3R5bGU9J3JlZCcpCgkJCXNvbCgpLnByaW50KGxvLCBzdHlsZT0nY3lhbicpCgkJCWV4aXQoKQoJZXhjZXB0IElPRXJyb3I6CgkJbG9naW5fbGFnaSgpCgojIExPR0lOCmRlZiBsb2dpbl9sYWdpKCk6CgliYW5uZXIoKQoJc2t5ID0gJyMgTE9HSU4gTUVOR0dVTkFLQU4gQUtTRVMgVE9LRU4nCglza3kyID0gbWFyayhza3ksIHN0eWxlPSdncmVlbicpCglzb2woKS5wcmludChza3kyLCBzdHlsZT0nY3lhbicpCglwYW5kYSA9IGlucHV0KHgrJ1snK3ArJ2YnK3grJ10gVG9rZW4gOiAnKQoJdHJ5OgoJCXRlcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScrcGFuZGEpCgkJdGVzMiA9IGpzb24ubG9hZHModGVzLnRleHQpWyduYW1lJ10KCQl0ZXMzID0ganNvbi5sb2Fkcyh0ZXMudGV4dClbJ2lkJ10KCQl0ZXM0ID0ganNvbi5sb2Fkcyh0ZXMudGV4dClbJ2JpcnRoZGF5J10KCQlvcGVuKCd0b2tlbi50eHQnLCd3Jykud3JpdGUocGFuZGEpCgkJc3VlID0gJyMgTG9naW4gU3Vrc2VzLCBUdW5nZ3UgU2ViZW50YXIgQnJvbyEnCgkJc3V1ID0gbWFyayhzdWUsIHN0eWxlPSdncmVlbicpCgkJc29sKCkucHJpbnQoc3V1LCBzdHlsZT0nY3lhbicpCgkJdGltZS5zbGVlcCgyLjUpCgkJbWVudSh0ZXMyLHRlczMsdGVzNCkKCWV4Y2VwdCBLZXlFcnJvcjoKCQlzdWUgPSAnIyBMb2dpbiBHYWdhbCwgUGVyaWtzYSBUb2tlbiBBbmRhIScKCQlzdXUgPSBtYXJrKHN1ZSwgc3R5bGU9J3JlZCcpCgkJc29sKCkucHJpbnQoc3V1LCBzdHlsZT0nY3lhbicpCgkJdGltZS5zbGVlcCgyLjUpCgkJbG9naW5fbGFnaSgpCglleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJbGkgPSAnIyBLT05FS1NJIElOVEVSTkVUIEJFUk1BU0FMQUgsIFBFUklLU0EgJiBDT0JBIExBR0knCgkJbG8gPSBtYXJrKGxpLCBzdHlsZT0ncmVkJykKCQlzb2woKS5wcmludChsbywgc3R5bGU9J2N5YW4nKQoJCWV4aXQoKQoKIyBNRU5VCmRlZiBtZW51KG15X25hbWUsbXlfaWQsbXlfYmlydGhkYXkpOgoJdHJ5OnNoID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2h0dHBiaW4ub3JnL2lwJykuanNvbigpCglleGNlcHQ6c2ggPSB7J29yaWdpbic6Jy0nfQoJdHJ5OgoJCXRnbHggPSBteV9iaXJ0aGRheS5zcGxpdCgnLycpWzFdCgkJYmxueCA9IGRpYzJbc3RyKG15X2JpcnRoZGF5LnNwbGl0KCcvJylbMF0pXQoJCXRobnggPSBteV9iaXJ0aGRheS5zcGxpdCgnLycpWzJdCgkJYmlydGggPSB0Z2x4KycgJytibG54KycgJyt0aG54CglleGNlcHQ6YmlydGggPSAnLScKCWJhbm5lcigpCglzZyA9ICcjIE1FTlUgVE9PTFMnCglmeCA9IG1hcmsoc2csIHN0eWxlPSdncmVlbicpCglzb2woKS5wcmludChmeCkKCXByaW50KHgrJ1snK2grJ+KAoicreCsnXSBBY3RpdmUgVXNlciA6ICcrc3RyKG15X25hbWUpKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIFVzZXIgSWQgICAgIDogJytzdHIobXlfaWQpKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIFVzZXIgVHRsICAgIDogJytzdHIoYmlydGgpKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIElwIEFkZHJlc3MgIDogJytzdHIoc2hbJ29yaWdpbiddKSkKCWlvID0gJ1swMV0gQ3JhY2sgRnJvbSBQdWJsaWMgRnJpZW5kc1xuWzAyXSBDcmFjayBGcm9tIFB1YmxpYyBGcmllbmRzIChCVUxLKVxuWzAzXSBDaGVjayBSZXN1bHQgQ3JhY2tcblswNF0gQ2hlY2sgT3B0aW9uIENoZWNrcG9pbnRcblswMF0gTG9nIE91dCcKCW9pID0gbmVsKGlvLCBzdHlsZT0nY3lhbicpCgljZXRhayhuZWwob2ksIHRpdGxlPSdNRU5VJykpCglqaCA9IGlucHV0KHgrJ1snK3ArJ2YnK3grJ10gUGlsaWggOiAnKQoJaWYgamggaW4gWycxJywnMDEnXToKCQlkdW1wX3B1YmxpaygpCgllbGlmIGpoIGluIFsnMicsJzAyJ106CgkJZHVtcF9tYXNzYWwoKQoJZWxpZiBqaCBpbiBbJzMnLCcwMyddOgoJCXJlc3VsdCgpCgllbGlmIGpoIGluIFsnNCcsJzA0J106CgkJZmlsZSgpCgllbGlmIGpoIGluIFsnMCcsJzAwJ106CgkJb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykKCQlwcmludCh4KydbJytoKyfigKInK3grJ10gV2FpdCAuLi4nKQoJCXRpbWUuc2xlZXAoMSkKCQlzdyA9ICcjIEJFUkhBU0lMIExPRyBPVVQnCgkJc29sKCkucHJpbnQobWFyayhzdywgc3R5bGU9J2dyZWVuJykpCgkJZXhpdCgpCgllbHNlOgoJCXJpYyA9ICcjIE9QVElPTiBJUyBOT1QgSU4gTUVOVScKCQlzb2woKS5wcmludChtYXJrKHJpYywgc3R5bGU9J3JlZCcpKQoJCWV4aXQoKQoKIyBSRVNVTFQgQ0hFQ0tFUgpkZWYgcmVzdWx0KCk6CgljZWsgPSAnIyBDSEVDSyBSRVNVTFQgQ1JBQ0snCglzb2woKS5wcmludChtYXJrKGNlaywgc3R5bGU9J2dyZWVuJykpCglrYXllcyA9ICdbMDFdIENoZWNrIEhhc2lsIENwXG5bMDJdIENoZWNrIEhhc2lsIE9rXG5bMDBdIEJhY2sgdG8gTWVudScKCWtpcyA9IG5lbChrYXllcywgc3R5bGU9J2N5YW4nKQoJY2V0YWsobmVsKGtpcywgdGl0bGU9J1JFU1VMVFMnKSkKCWt6ID0gaW5wdXQoeCsnWycrcCsnZicreCsnXSBQaWxpaCA6ICcpCglpZiBreiBpbiBbJzEnLCcwMSddOgoJCXRyeTp2aW4gPSBvcy5saXN0ZGlyKCdDUCcpCgkJZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgoJCQlnYWRhID0gJyMgRElSRUNUT1JZIE5PVCBGT1VORCcKCQkJc29sKCkucHJpbnQobWFyayhnYWRhLCBzdHlsZT0ncmVkJykpCgkJCXRpbWUuc2xlZXAoMikKCQkJYmFjaygpCgkJaWYgbGVuKHZpbik9PTA6CgkJCWhhaGEgPSAnIyBBTkRBIEJFTFVNIE1FTUlMSUtJIFJFU1VMVCBDUCcKCQkJc29sKCkucHJpbnQobWFyayhoYWhhLCBzdHlsZT0neWVsbG93JykpCgkJCXRpbWUuc2xlZXAoMikKCQkJYmFjaygpCgkJZWxzZToKCQkJZ2VyciA9ICcjIEhBU0lMIENQIEFOREEnCgkJCXNvbCgpLnByaW50KG1hcmsoZ2Vyciwgc3R5bGU9J2dyZWVuJykpCgkJCWNpaCA9IDAKCQkJbG9sID0ge30KCQkJZm9yIGlzaSBpbiB2aW46CgkJCQl0cnk6aGVtID0gb3BlbignQ1AvJytpc2ksJ3InKS5yZWFkbGluZXMoKQoJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQljaWgrPTEKCQkJCWlmIGNpaDwxMDoKCQkJCQlub20gPSAnMCcrc3RyKGNpaCkKCQkJCQlsb2wudXBkYXRlKHtzdHIoY2loKTpzdHIoaXNpKX0pCgkJCQkJbG9sLnVwZGF0ZSh7bm9tOnN0cihpc2kpfSkKCQkJCQlwcmludCgnWycrbm9tKyddICcraXNpKycgLS0tPiAnK3N0cihsZW4oaGVtKSkrJyBBa3VuJyt4KQoJCQkJZWxzZToKCQkJCQlsb2wudXBkYXRlKHtzdHIoY2loKTpzdHIoaXNpKX0pCgkJCQkJcHJpbnQoJ1snK3N0cihjaWgpKyddICcraXNpKycgLS0tPiAnK3N0cihsZW4oaGVtKSkrJyBBa3VuJyt4KQoJCQlnZXJyMiA9ICcjIFBJTElIIFJFU1VMVCBVTlRVSyBESVRBTVBJTEtBTicKCQkJc29sKCkucHJpbnQobWFyayhnZXJyMiwgc3R5bGU9J2dyZWVuJykpCgkJCWdlZWggPSBpbnB1dCh4KydbJytwKydmJyt4KyddIFBpbGloIDogJykKCQkJdHJ5OmdlaCA9IGxvbFtnZWVoXQoJCQlleGNlcHQgS2V5RXJyb3I6CgkJCQlyaWMgPSAnIyBQSUxJSEFOIFRJREFLIEFEQSBESSBNRU5VJwoJCQkJc29sKCkucHJpbnQobWFyayhyaWMsIHN0eWxlPSdyZWQnKSkKCQkJCWV4aXQoKQoJCQl0cnk6bGluID0gb3BlbignQ1AvJytnZWgsJ3InKS5yZWFkKCkKCQkJZXhjZXB0OgoJCQkJaGVoZSA9ICcjIEZJTEUgVElEQUsgRElURU1VS0FOLCBQRVJJS1NBICYgQ09CQSBMQUdJJwoJCQkJc29sKCkucHJpbnQobWFyayhoZWhlLCBzdHlsZT0ncmVkJykpCgkJCQl0aW1lLnNsZWVwKDIpCgkJCQliYWNrKCkKCQkJYWt1biA9ICcjIExJU1QgQUtVTiBDUCBBTkRBJwoJCQlzb2woKS5wcmludChtYXJrKGFrdW4sIHN0eWxlPSdncmVlbicpKQoJCQlodXMgPSBvcy5zeXN0ZW0oJ2NkIENQICYmIGNhdCAnK2dlaCkKCQkJYWt1bjIgPSAnIyBMSVNUIEFLVU4gQ1AgQU5EQScKCQkJc29sKCkucHJpbnQobWFyayhha3VuLCBzdHlsZT0nZ3JlZW4nKSkKCQkJaW5wdXQoeCsnWycraCsn4oCiJyt4KyddIEtlbWJhbGknKQoJCQliYWNrKCkKCWVsaWYga3ogaW4gWycyJywnMDInXToKCQl0cnk6dmluID0gb3MubGlzdGRpcignT0snKQoJCWV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKCQkJZ2FkYSA9ICcjIERJUkVLVE9SSSBUSURBSyBESVRFTVVLQU4nCgkJCXNvbCgpLnByaW50KG1hcmsoZ2FkYSwgc3R5bGU9J3JlZCcpKQoJCQl0aW1lLnNsZWVwKDIpCgkJCWJhY2soKQoJCWlmIGxlbih2aW4pPT0wOgoJCQloYWhhID0gJyMgQU5EQSBCRUxVTSBNRU1JTElLSSBSRVNVTFQgT0snCgkJCXNvbCgpLnByaW50KG1hcmsoaGFoYSwgc3R5bGU9J3llbGxvdycpKQoJCQl0aW1lLnNsZWVwKDIpCgkJCWJhY2soKQoJCWVsc2U6CgkJCWdlcnIgPSAnIyBIQVNJTCBPSyBBTkRBJwoJCQlzb2woKS5wcmludChtYXJrKGdlcnIsIHN0eWxlPSdncmVlbicpKQoJCQljaWggPSAwCgkJCWxvbCA9IHt9CgkJCWZvciBpc2kgaW4gdmluOgoJCQkJdHJ5OmhlbSA9IG9wZW4oJ09LLycraXNpLCdyJykucmVhZGxpbmVzKCkKCQkJCWV4Y2VwdDpjb250aW51ZQoJCQkJY2loKz0xCgkJCQlpZiBjaWg8MTA6CgkJCQkJbm9tID0gJzAnK3N0cihjaWgpCgkJCQkJbG9sLnVwZGF0ZSh7c3RyKGNpaCk6c3RyKGlzaSl9KQoJCQkJCWxvbC51cGRhdGUoe25vbTpzdHIoaXNpKX0pCgkJCQkJcHJpbnQoJ1snK25vbSsnXSAnK2lzaSsnIC0tLT4gJytzdHIobGVuKGhlbSkpKycgQWt1bicreCkKCQkJCWVsc2U6CgkJCQkJbG9sLnVwZGF0ZSh7c3RyKGNpaCk6c3RyKGlzaSl9KQoJCQkJCXByaW50KCdbJytzdHIoY2loKSsnXSAnK2lzaSsnIC0tLT4gJytzdHIobGVuKGhlbSkpKycgQWt1bicreCkKCQkJZ2VycjIgPSAnIyBQSUxJSCBSRVNVTFQgVU5UVUsgRElUQU1QSUxLQU4nCgkJCXNvbCgpLnByaW50KG1hcmsoZ2VycjIsIHN0eWxlPSdncmVlbicpKQoJCQlnZWVoID0gaW5wdXQoeCsnWycrcCsnZicreCsnXSBQaWxpaCA6ICcpCgkJCXRyeTpnZWggPSBsb2xbZ2VlaF0KCQkJZXhjZXB0IEtleUVycm9yOgoJCQkJcmljID0gJyMgUElMSUhBTiBUSURBSyBBREEgREkgTUVOVScKCQkJCXNvbCgpLnByaW50KG1hcmsocmljLCBzdHlsZT0ncmVkJykpCgkJCQlleGl0KCkKCQkJdHJ5OmxpbiA9IG9wZW4oJ09LLycrZ2VoLCdyJykucmVhZCgpCgkJCWV4Y2VwdDoKCQkJCWhlaGUgPSAnIyBGSUxFIFRJREFLIERJVEVNVUtBTiwgUEVSSUtTQSAmIENPQkEgTEFHSScKCQkJCXNvbCgpLnByaW50KG1hcmsoaGVoZSwgc3R5bGU9J3JlZCcpKQoJCQkJdGltZS5zbGVlcCgyKQoJCQkJYmFjaygpCgkJCWFrdW4gPSAnIyBMSVNUIEFLVU4gT0sgQU5EQScKCQkJc29sKCkucHJpbnQobWFyayhha3VuLCBzdHlsZT0nZ3JlZW4nKSkKCQkJaHVzID0gb3Muc3lzdGVtKCdjZCBPSyAmJiBjYXQgJytnZWgpCgkJCWFrdW4yID0gJyMgTElTVCBBS1VOIE9LIEFOREEnCgkJCXNvbCgpLnByaW50KG1hcmsoYWt1biwgc3R5bGU9J2dyZWVuJykpCgkJCWlucHV0KHgrJ1snK2grJ+KAoicreCsnXSBLZW1iYWxpJykKCQkJYmFjaygpCgllbGlmIGt6IGluIFsnMCcsJzAwJ106CgkJYmFjaygpCgllbHNlOgoJCXJpYyA9ICcjIFBJTElIQU4gVElEQUsgQURBIERJIE1FTlUnCgkJc29sKCkucHJpbnQobWFyayhyaWMsIHN0eWxlPSdyZWQnKSkKCQlleGl0KCkKCiMgT1BFTgpkZWYgZmlsZSgpOgoJdGVrID0gJyMgQ0VLIE9QU0kgREFSSSBGSUxFJwoJc29sKCkucHJpbnQobWFyayh0ZWssIHN0eWxlPSdjeWFuJyksIHN0eWxlPSdvbiByZWQnKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIFNlZGFuZyBNZW1iYWNhIEZpbGUsIFR1bmdndSBTZWJlbnRhciAuLi4nKQoJdGltZS5zbGVlcCgyKQoJdGVrcyA9ICcjIFBJTElIIEZJTEUgWUcgQUtBTiBESSBDRUsnCglzb2woKS5wcmludChtYXJrKHRla3MsIHN0eWxlPSdncmVlbicpKQoJbXlfZmlsZXMgPSBbXQoJdHJ5OgoJCWxpcyA9IG9zLmxpc3RkaXIoJ0NQJykKCQlmb3Iga3QgaW4gbGlzOgoJCQlteV9maWxlcy5hcHBlbmQoa3QpCglleGNlcHQ6cGFzcwoJdHJ5OgoJCW1lciA9IG9zLmxpc3RkaXIoJ09LJykKCQlmb3IgdHkgaW4gbWVyOgoJCQlteV9maWxlcy5hcHBlbmQodHkpCglleGNlcHQ6cGFzcwoJaWYgbGVuKG15X2ZpbGVzKT09MDoKCQl5eSA9ICcjIEFOREEgQkVMVU0gTUVNSUxJS0kgUkVTVUxUIFVOVFVLIERJQ0VLJwoJCXNvbCgpLnByaW50KG1hcmsoeXksIHN0eWxlPSdyZWQnKSkKCQlleGl0KCkKCWVsc2U6CgkJY2loID0gMAoJCWxvbCA9IHt9CgkJZm9yIGlzaSBpbiBteV9maWxlczoKCQkJdHJ5OmhlbSA9IG9wZW4oJ0NQLycraXNpLCdyJykucmVhZGxpbmVzKCkKCQkJZXhjZXB0OgoJCQkJdHJ5OmhlbSA9IG9wZW4oJ09LLycraXNpLCdyJykucmVhZGxpbmVzKCkKCQkJCWV4Y2VwdDpjb250aW51ZQoJCQljaWgrPTEKCQkJaWYgY2loPDEwOgoJCQkJbm9tID0gJzAnK3N0cihjaWgpCgkJCQlsb2wudXBkYXRlKHtzdHIoY2loKTpzdHIoaXNpKX0pCgkJCQlsb2wudXBkYXRlKHtub206c3RyKGlzaSl9KQoJCQkJcHJpbnQoJ1snK25vbSsnXSAnK2lzaSsnIC0tLT4gJytzdHIobGVuKGhlbSkpKycgQWt1bicreCkKCQkJZWxzZToKCQkJCWxvbC51cGRhdGUoe3N0cihjaWgpOnN0cihpc2kpfSkKCQkJCXByaW50KCdbJytzdHIoY2loKSsnXSAnK2lzaSsnIC0tLT4gJytzdHIobGVuKGhlbSkpKycgQWt1bicreCkKCQl0ZWtzMiA9ICcjIFBJTElIIEZJTEUgWUcgQUtBTiBESSBDRUsnCgkJc29sKCkucHJpbnQobWFyayh0ZWtzMiwgc3R5bGU9J2dyZWVuJykpCgkJZ2VlaCA9IGlucHV0KHgrJ1snK3ArJ2YnK3grJ10gUGlsaWggOiAnKQoJCXRyeTpnZWggPSBsb2xbZ2VlaF0KCQlleGNlcHQgS2V5RXJyb3I6CgkJCXJpYyA9ICcjIFBJTElIQU4gVElEQUsgQURBIERJIE1FTlUnCgkJCXNvbCgpLnByaW50KG1hcmsocmljLCBzdHlsZT0ncmVkJykpCgkJCWV4aXQoKQoJCXRyeToKCQkJaGYgPSBvcGVuKCdDUC8nK2dlaCwncicpLnJlYWRsaW5lcygpCgkJCWZvciBmeiBpbiBoZjoKCQkJCWFrdW4uYXBwZW5kKGZ6LnJlcGxhY2UoJ1xuJywnJykpCgkJCWNla19vcHNpKCkKCQlleGNlcHQgSU9FcnJvcjoKCQkJdHJ5OgoJCQkJaGYgPSBvcGVuKCdPSy8nK2dlaCwncicpLnJlYWRsaW5lcygpCgkJCQlmb3IgZnogaW4gaGY6CgkJCQkJYWt1bi5hcHBlbmQoZnoucmVwbGFjZSgnXG4nLCcnKSkKCQkJCWNla19vcHNpKCkKCQkJZXhjZXB0IElPRXJyb3I6CgkJCQloZWhlID0gJyMgRklMRSBUSURBSyBESVRFTVVLQU4sIFBFUklLU0EgJiBDT0JBIExBR0knCgkJCQlzb2woKS5wcmludChtYXJrKGhlaGUsIHN0eWxlPSdyZWQnKSkKCQkJCXRpbWUuc2xlZXAoMikKCQkJCWJhY2soKQoKIyBEVU1QIElEIFBVQkxJSwpkZWYgZHVtcF9wdWJsaWsoKToKCXRyeToKCQl0b2tlbiA9IG9wZW4oJ3Rva2VuLnR4dCcsJ3InKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWV4aXQoKQoJd2luID0gJyMgRFVNUCBJRCBQVUJMSUsnCgl3aW4yID0gbWFyayh3aW4sIHN0eWxlPSdncmVlbicpCglzb2woKS5wcmludCh3aW4yKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIEtldGlrICJtZSIgSmlrYSBJbmdpbiBEdW1wIElEIERhcmkgVGVtYW4nKQoJcGlsID0gaW5wdXQoeCsnWycrcCsnZicreCsnXSBNYXN1a2thbiBJRCBUYXJnZXQgOiAnKQoJdHJ5OgoJCWtvaCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytwaWwrJz9hY2Nlc3NfdG9rZW49Jyt0b2tlbikKCQlncmV4ID0ganNvbi5sb2Fkcyhrb2gudGV4dClbJ25hbWUnXQoJCWtyYXMgPSAnIyBJTkZPIFRBUkdFVCcKCQlrcmFzMiA9IG1hcmsoa3Jhcywgc3R5bGU9J2dyZWVuJykKCQlzb2woKS5wcmludChrcmFzMikKCQlwcmludCh4KydbJytoKyfigKInK3grJ10gTmFtYSAgOiAnK3N0cihncmV4KSkKCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CgkJdGVrcyA9ICcjIElEIFRpZGFrIERpdGVtdWthbicKCQl0ZWtzMiA9IG1hcmsodGVrcywgc3R5bGU9J3JlZCcpCgkJc29sKCkucHJpbnQodGVrczIpCgkJdGltZS5zbGVlcCgyKQoJCWV4aXQoKQoJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCWxpID0gJyMgS09ORUtTSSBJTlRFUk5FVCBCRVJNQVNBTEFILCBQRVJJS1NBICYgQ09CQSBMQUdJJwoJCWxvID0gbWFyayhsaSwgc3R5bGU9J3JlZCcpCgkJc29sKCkucHJpbnQobG8sIHN0eWxlPSdjeWFuJykKCQlleGl0KCkKCXRyeToKCQlrb2gyID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK3BpbCsnL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49Jyt0b2tlbikKCQlrb2gzID0ganNvbi5sb2Fkcyhrb2gyLnRleHQpCgkJZm9yIHBpIGluIGtvaDNbJ2RhdGEnXToKCQkJdHJ5OmlkLmFwcGVuZChwaVsnaWQnXSsnfCcrcGlbJ25hbWUnXSkKCQkJZXhjZXB0OmNvbnRpbnVlCgkJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIFRvdGFsIDogJytzdHIobGVuKGlkKSkpCgkJc2V0dGluZygpCglleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJbGkgPSAnIyBLT05FS1NJIElOVEVSTkVUIEJFUk1BU0FMQUgsIFBFUklLU0EgJiBDT0JBIExBR0knCgkJbG8gPSBtYXJrKGxpLCBzdHlsZT0ncmVkJykKCQlzb2woKS5wcmludChsbywgc3R5bGU9J2N5YW4nKQoJCWV4aXQoKQoJZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKCQl0ZWtzID0gJyMgUEVSVEVNQU5BTiBUSURBSyBQVUJMSUsgQVRBVSBUT0tFTiBSVVNBSycKCQl0ZWtzMiA9IG1hcmsodGVrcywgc3R5bGU9J3JlZCcpCgkJc29sKCkucHJpbnQodGVrczIpCgkJZXhpdCgpCgojIERVTVAgSUQgTUFTU0FMCmRlZiBkdW1wX21hc3NhbCgpOgoJdHJ5OgoJCXRva2VuID0gb3BlbigndG9rZW4udHh0JywncicpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJZXhpdCgpCgl3aW4gPSAnIyBEVU1QIElEIFBVQkxJSyBNQVNTQUwnCgl3aW4yID0gbWFyayh3aW4sIHN0eWxlPSdncmVlbicpCglzb2woKS5wcmludCh3aW4yKQoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIE1BU1VLS0FOIEpVTUxBSCBJRCAoTElNSVQgMTApJykKCXRyeToKCQlqdW0gPSBpbnQoaW5wdXQoeCsnWycrcCsnZicreCsnXSBCRVJBUEEgSUQgOiAnKSkKCWV4Y2VwdCBWYWx1ZUVycm9yOgoJCXBlc2FuID0gJyMgSU5QVVQgWUFORyBBTkRBIE1BU1VLS0FOIEJVS0FOIEFOR0tBJwoJCXBlc2FuMiA9IG1hcmsocGVzYW4sIHN0eWxlPSdyZWQnKQoJCXNvbCgpLnByaW50KHBlc2FuMikKCQlleGl0KCkKCWlmIGp1bTwxIG9yIGp1bT4xMDoKCQlwZXNhbiA9ICcjIE9VVCBPRiBSQU5HRSBNRU4nCgkJcGVzYW4yID0gbWFyayhwZXNhbiwgc3R5bGU9J3JlZCcpCgkJc29sKCkucHJpbnQocGVzYW4yKQoJCWV4aXQoKQoJdWlkID0gW10KCXl6ID0gMAoJcHJpbnQoeCsnWycraCsn4oCiJyt4KyddIEtldGlrICJtZSIgSmlrYSBJbmdpbiBEdW1wIElEIERhcmkgVGVtYW4nKQoJZm9yIG1ldCBpbiByYW5nZShqdW0pOgoJCXl6Kz0xCgkJa2wgPSBpbnB1dCh4KydbJytoK3N0cih5eikreCsnXSBNYXN1a2thbiBJRCBLZSAnK3N0cih5eikrJyA6ICcpCgkJdWlkLmFwcGVuZChrbCkKCWZvciB1c2VyciBpbiB1aWQ6CgkJdHJ5OgoJCQljb2wgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycrdXNlcnIrJy9mcmllbmRzP2xpbWl0PTUwMDAmYWNjZXNzX3Rva2VuPScrdG9rZW4pCgkJCWNvbDIgPSBqc29uLmxvYWRzKGNvbC50ZXh0KQoJCQlmb3IgbWkgaW4gY29sMlsnZGF0YSddOgoJCQkJdHJ5OgoJCQkJCWlzbyA9IG1pWydpZCddKyd8JyttaVsnbmFtZSddCgkJCQkJaWYgaXNvIGluIGlkOnBhc3MKCQkJCQllbHNlOmlkLmFwcGVuZChpc28pCgkJCQlleGNlcHQ6Y29udGludWUKCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgoJCQlwYXNzCgkJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCQlsaSA9ICcjIEtPTkVLU0kgSU5URVJORVQgQkVSTUFTQUxBSCwgUEVSSUtTQSAmIENPQkEgTEFHSScKCQkJbG8gPSBtYXJrKGxpLCBzdHlsZT0ncmVkJykKCQkJc29sKCkucHJpbnQobG8sIHN0eWxlPSdjeWFuJykKCQkJZXhpdCgpCgl0b3QgPSAnIyBCRVJIQVNJTCBNRU5HVU1QVUxLQU4gJXMgSUQnJShsZW4oaWQpKQoJaWYgbGVuKGlkKT09MDoKCQl0b3QyID0gbWFyayh0b3QsIHN0eWxlPSdyZWQnKQoJZWxzZToKCQl0b3QyID0gbWFyayh0b3QsIHN0eWxlPSdncmVlbicpCglzb2woKS5wcmludCh0b3QyKQoJc2V0dGluZygpCgojIElEIFNFVFRJTkdTCmRlZiBzZXR0aW5nKCk6Cgl3bCA9ICcjIFNFVFRJTkcgVVJVVEFOIElEJwoJc29sKCkucHJpbnQobWFyayh3bCwgc3R5bGU9J2dyZWVuJykpCgl0ZWtzID0gJ1swMV0gQ3JhY2sgRGFyaSBBa3VuIFRlcnR1YSAoTm90IFJlY29tbWVuZGVkKVxuWzAyXSBDcmFjayBEYXJpIEFrdW4gVGVybXVkYSAoUmVjb21tZW5kZWQpXG5bMDNdIEFjYWsgVXJ1dGFuIElEIChIaWdobHkgUmVjb21tZW5kZWQpJwoJdGFrID0gbmVsKHRla3MsIHN0eWxlPSdjeWFuJykKCWNldGFrKG5lbCh0YWssIHRpdGxlPSdTRVRUSU5HJykpCglodSA9IGlucHV0KHgrJ1snK3ArJ2YnK3grJ10gUGlsaWggOiAnKQoJaWYgaHUgaW4gWycxJywnMDEnXToKCQlmb3IgYmFjb3QgaW4gaWQ6CgkJCWlkMi5hcHBlbmQoYmFjb3QpCgllbGlmIGh1IGluIFsnMicsJzAyJ106CgkJZm9yIGJhY290IGluIGlkOgoJCQlpZDIuaW5zZXJ0KDAsYmFjb3QpCgllbGlmIGh1IGluIFsnMycsJzAzJ106CgkJZm9yIGJhY290IGluIGlkOgoJCQl4eCA9IHJhbmRvbS5yYW5kaW50KDAsbGVuKGlkMikpCgkJCWlkMi5pbnNlcnQoeHgsYmFjb3QpCgllbHNlOgoJCXJpYyA9ICcjIFBJTElIQU4gVElEQUsgQURBIERJIE1FTlUnCgkJc29sKCkucHJpbnQobWFyayhyaWMsIHN0eWxlPSdyZWQnKSkKCQlleGl0KCkKCW1ldCA9ICcjIFBJTElIIE1FVEhPRCBDUkFDSycKCXNvbCgpLnByaW50KG1hcmsobWV0LCBzdHlsZT0nZ3JlZW4nKSkKCWlveiA9ICdbMDFdIE1ldGhvZCBCLUFwaSAoRmFzdClcblswMl0gTWV0aG9kIEZyZWUtZmIgW0Zhc3RdIChSZWNvbW1lbmRlZClcblswM10gTWV0aG9kIE1vYmlsZSBbU2xvd10gKFJlY29tbWVuZGVkKScKCWdlc3MgPSBuZWwoaW96LCBzdHlsZT0nY3lhbicpCgljZXRhayhuZWwoZ2VzcywgdGl0bGU9J01FVEhPRCcpKQoJaGMgPSBpbnB1dCh4KydbJytwKydmJyt4KyddIFBpbGloIDogJykKCWlmIGhjIGluIFsnMScsJzAxJ106CgkJbWV0aG9kLmFwcGVuZCgnYXBpJykKCWVsaWYgaGMgaW4gWycyJywnMDInXToKCQltZXRob2QuYXBwZW5kKCdmcmVlJykKCWVsaWYgaGMgaW4gWyczJywnMDMnXToKCQltZXRob2QuYXBwZW5kKCdtb2JpbGUnKQoJZWxzZToKCQlyaWMgPSAnIyBQSUxJSEFOIFRJREFLIEFEQSBESSBNRU5VJwoJCXNvbCgpLnByaW50KG1hcmsocmljLCBzdHlsZT0ncmVkJykpCgkJZXhpdCgpCglndXcgPSAnIyBJTkdJTiBPUFNJIENSQUNLPycKCXNvbCgpLnByaW50KG1hcmsoZ3V3LCBzdHlsZT0nZ3JlZW4nKSkKCW9zayA9IGlucHV0KHgrJ1snK3ArJ2YnK3grJ10gVGFtcGlsa2FuIE9wc2kgQ2hlY2twb2ludD8gWyBOb3QgUmVjb21tZW5kZWQgXSAoeS90KSA6ICcpCglpZiBvc2sgaW4gWyd5JywnWSddOgoJCW9wcmVrLmFwcGVuZCgneWEnKQoJZWxzZToKCQlvcHJlay5hcHBlbmQoJ25vJykKCXBhc3N3cmQoKQoKIyBXT1JETElTVApkZWYgcGFzc3dyZCgpOgoJbGVyID0gJyMgUFJPU0VTIENSQUNLIERJTVVMQUksIFRFS0FOIENUUkwrWiBVTlRVSyBCRVJIRU5USScKCXNvbCgpLnByaW50KG1hcmsobGVyLCBzdHlsZT0nZ3JlZW4nKSkKCWtyZWsgPSAnSGFzaWwgTGl2ZSAgRGlzaW1wYW4gS2UgOiBPSy8lc1xuSGFzaWwgQ2hlY2sgRGlzaW1wYW4gS2UgOiBDUC8lc1xuSGlkdXBrYW4vTWF0aWthbiBNb2RlIFBlc2F3YXQgU2V0aWFwIDUgTWVuaXQnJShva2MsY3BjKQoJY2V0YWsobmVsKGtyZWssIHRpdGxlPSdDUkFDSycpKQoJd2l0aCB0cmVkKG1heF93b3JrZXJzPTMwKSBhcyBwb29sOgoJCWZvciB5dXpvbmcgaW4gaWQyOgoJCQlpZGYsbm1mID0geXV6b25nLnNwbGl0KCd8JylbMF0seXV6b25nLnNwbGl0KCd8JylbMV0ubG93ZXIoKQoJCQlmcnMgPSBubWYuc3BsaXQoJyAnKVswXQoJCQlwd3YgPSBbXQoJCQlpZiBsZW4obm1mKTw2OgoJCQkJaWYgbGVuKGZycyk8MzoKCQkJCQljb250aW51ZQoJCQkJZWxzZToKCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzJykKCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDUnKQoJCQllbHNlOgoJCQkJaWYgbGVuKGZycyk8MzoKCQkJCQlwd3YuYXBwZW5kKG5tZikKCQkJCWVsc2U6CgkJCQkJcHd2LmFwcGVuZChubWYpCgkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMycpCgkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1JykKCQkJaWYgJ2ZyZWUnIGluIG1ldGhvZDoKCQkJCXBvb2wuc3VibWl0KGNyYWNrLGlkZixwd3YpCgkJCWVsaWYgJ2FwaScgaW4gbWV0aG9kOgoJCQkJcG9vbC5zdWJtaXQoY3JhY2syLGlkZixwd3YpCgkJCWVsc2U6CgkJCQlwb29sLnN1Ym1pdChjcmFjazMsaWRmLHB3dikKCWlmIGxlbihha3VuKT09MDpleGl0KCkKCXByaW50KCcnKQoJdGFueWEgPSAnIyBJTkdJTiBNRU5HRUNFSyBPUFNJIEhBU0lMIENSQUNLPycKCXNvbCgpLnByaW50KG1hcmsodGFueWEsIHN0eWxlPSdncmVlbicpKQoJd29pID0gaW5wdXQoeCsnWycrcCsnZicreCsnXSBJbmdpbiBNZW5hbXBpbGthbiBPcHNpIEhhc2lsIENyYWNrPyAoeS90KSA6ICcpCglpZiB3b2kgaW4gWyd5JywnWSddOgoJCWNla19vcHNpKCkKCWVsc2U6CgkJZXhpdCgpCgojIENSQUNLRVIKZGVmIGNyYWNrKGlkZixwd3YpOgoJZ2xvYmFsIGxvb3Asb2ssY3AKCWJpID0gcmFuZG9tLmNob2ljZShbdSxrLGtrLGIsaCxoaF0pCglwZXJzID0gbG9vcCoxMDAvbGVuKGlkMikKCWZmZiA9ICclJwoJcHJpbnQoJ1xyJXMtLS0+ICVzLyVzIC0tLT4gb2sqJXMgLS0tPiBjcColcyAtLS0+ICVzJXMlcyclKGJpLGxvb3AsbGVuKGlkMiksb2ssY3AsaW50KHBlcnMpLHN0cihmZmYpLHgpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCXVhID0gcmFuZG9tLmNob2ljZSh1Z2VuKS5yZXBsYWNlKCdcbicsJycpCglzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKCWZvciBwdyBpbiBwd3Y6CgkJdHJ5OgoJCQloZWFkID0geyJIb3N0IjogImZyZWUuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCJvcmlnaW4iOiAiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbSIsImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ1c2VyLWFnZW50IjogdWEsImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsInNlYy1mZXRjaC1zaXRlIjogInNhbWUtb3JpZ2luIiwic2VjLWZldGNoLW1vZGUiOiAibmF2aWdhdGUiLCJzZWMtZmV0Y2gtdXNlciI6ICI/MSIsInNlYy1mZXRjaC1kZXN0IjogImRvY3VtZW50IiwicmVmZXJlciI6ICJodHRwczovL2ZyZWUuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0KCQkJZHQgPSB7J2VtYWlsJzogaWRmLCdwYXNzJzogcHcsJ2xvZ2luJzogJ3N1Ym1pdCd9CgkJCWogPSBzZXMucG9zdCgnaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS9sb2dpbi5waHAnLCBkYXRhPWR0LCBoZWFkZXJzPWhlYWQsIGFsbG93X3JlZGlyZWN0cz1GYWxzZSkKCQkJaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJaWYgJ3lhJyBpbiBvcHJlazoKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNla2VyKGlkZixwdykKCQkJCWVsc2U6CgkJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IENQICAgICAgICclKGIsaWRmLHB3KSkKCQkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNwKz0xCgkJCQlicmVhawoJCQllbGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IE9LICAgICAgICclKGgsaWRmLHB3KSkKCQkJCW9wZW4oJ09LLycrb2tjLCdhJykud3JpdGUoaWRmKyd8JytwdysnXG4nKQoJCQkJb2srPTEKCQkJCWJyZWFrCgkJCWVsc2U6CgkJCQljb250aW51ZQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJdGltZS5zbGVlcCgzMSkKCWxvb3ArPTEKCiMgQ1JBQ0tFUjIKZGVmIGNyYWNrMihpZGYscHd2KToKCWdsb2JhbCBsb29wLG9rLGNwCgliaSA9IHJhbmRvbS5jaG9pY2UoW3UsayxrayxiLGgsaGhdKQoJcGVycyA9IGxvb3AqMTAwL2xlbihpZDIpCglmZmYgPSAnJScKCXByaW50KCdcciVzLS0tPiAlcy8lcyAtLS0+IG9rKiVzIC0tLT4gY3AqJXMgLS0tPiAlcyVzJXMnJShiaSxsb29wLGxlbihpZDIpLG9rLGNwLGludChwZXJzKSxzdHIoZmZmKSx4KSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCgl1YSA9IHJhbmRvbS5jaG9pY2UodWdlbikucmVwbGFjZSgnXG4nLCcnKQoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCglmb3IgcHcgaW4gcHd2OgoJCXRyeToKCQkJaGVhZCA9IHsieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKSksICJ4LWZiLXNpbS1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksICJ4LWZiLW5ldC1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksICJ4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSI6ICJFWENFTExFTlQiLCAieC1mYi1jb25uZWN0aW9uLXR5cGUiOiAiY2VsbC5DVFJhZGlvQWNjZXNzVGVjaG5vbG9neUhTRFBBIiwgInVzZXItYWdlbnQiOiB1YSwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCAieC1mYi1odHRwLWVuZ2luZSI6ICJMaWdlciJ9CgkJCXJlc3AgPSBzZXMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9mb3JtYXQ9anNvbiZlbWFpbD0iK3N0cihpZGYpKyImcGFzc3dvcmQ9IitzdHIocHcpKyImY3JlZGVudGlhbHNfdHlwZT1kZXZpY2VfYmFzZWRfbG9naW5fcGFzc3dvcmQmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmZXJyb3JfZGV0YWlsX3R5cGU9YnV0dG9uX3dpdGhfZGlzYWJsZWQmc291cmNlPWRldmljZV9iYXNlZF9sb2dpbiZtZXRhX2luZl9mYm1ldGE9JTIwJmN1cnJlbnRseV9sb2dnZWRfaW5fdXNlcmlkPTAmbWV0aG9kPUdFVCZsb2NhbGU9ZW5fVVMmY2xpZW50X2NvdW50cnlfY29kZT1VUyZmYl9hcGlfY2FsbGVyX2NsYXNzPWNvbS5mYWNlYm9vay5mb3MuaGVhZGVyc3YyLmZiNGFvcmNhLkhlYWRlcnNWMkNvbmZpZ0ZldGNoUmVxdWVzdEhhbmRsZXImYWNjZXNzX3Rva2VuPTM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiZmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWU9YXV0aGVudGljYXRlJmNwbD10cnVlIiwgaGVhZGVycz1oZWFkKQoJCQlpZiAid3d3LmZhY2Vib29rLmNvbSIgaW4gcmVzcC5qc29uKClbImVycm9yX21zZyJdOgoJCQkJaWYgJ3lhJyBpbiBvcHJlazoKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNla2VyKGlkZixwdykKCQkJCWVsc2U6CgkJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IENQICAgICAgICclKGIsaWRmLHB3KSkKCQkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNwKz0xCgkJCQlicmVhawoJCQllbGlmICJzZXNzaW9uX2tleSIgaW4gcmVzcC50ZXh0IGFuZCAiRUFBQSIgaW4gcmVzcC50ZXh0OgoJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IE9LICAgICAgICclKGgsaWRmLHB3KSkKCQkJCW9wZW4oJ09LLycrb2tjLCdhJykud3JpdGUoaWRmKyd8JytwdysnXG4nKQoJCQkJb2srPTEKCQkJCWJyZWFrCgkJCWVsc2U6CgkJCQljb250aW51ZQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJdGltZS5zbGVlcCgzMSkKCWxvb3ArPTEKCmRlZiBjcmFjazMoaWRmLHB3dik6CglnbG9iYWwgbG9vcCxvayxjcAoJYmkgPSByYW5kb20uY2hvaWNlKFt1LGssa2ssYixoLGhoXSkKCXBlcnMgPSBsb29wKjEwMC9sZW4oaWQyKQoJZmZmID0gJyUnCglwcmludCgnXHIlcy0tLT4gJXMvJXMgLS0tPiBvayolcyAtLS0+IGNwKiVzIC0tLT4gJXMlcyVzJyUoYmksbG9vcCxsZW4oaWQyKSxvayxjcCxpbnQocGVycyksc3RyKGZmZikseCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQoJdWEgPSByYW5kb20uY2hvaWNlKHVnZW4pLnJlcGxhY2UoJ1xuJywnJykKCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJZm9yIHB3IGluIHB3djoKCQl0cnk6CgkJCWhlYWQgPSB7Ikhvc3QiOiAibS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsIm9yaWdpbiI6ICJodHRwczovL20uZmFjZWJvb2suY29tIiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsInVzZXItYWdlbnQiOiB1YSwiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLCJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLCJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsInNlYy1mZXRjaC11c2VyIjogIj8xIiwic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLCJyZWZlcmVyIjogImh0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifQoJCQlkdCA9IHsnZW1haWwnOiBpZGYsJ3Bhc3MnOiBwdywnbG9naW4nOiAnc3VibWl0J30KCQkJeiA9IHNlcy5nZXQoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20nKQoJCQlqID0gc2VzLnBvc3QoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4ucGhwJywgZGF0YT1kdCwgaGVhZGVycz1oZWFkLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkKCQkJaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJaWYgJ3lhJyBpbiBvcHJlazoKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNla2VyKGlkZixwdykKCQkJCWVsc2U6CgkJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IENQICAgICAgICclKGIsaWRmLHB3KSkKCQkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNwKz0xCgkJCQlicmVhawoJCQllbGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IE9LICAgICAgICclKGgsaWRmLHB3KSkKCQkJCW9wZW4oJ09LLycrb2tjLCdhJykud3JpdGUoaWRmKyd8JytwdysnXG4nKQoJCQkJb2srPTEKCQkJCWJyZWFrCgkJCWVsc2U6CgkJCQljb250aW51ZQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJdGltZS5zbGVlcCgzMSkKCWxvb3ArPTEKCiMgT1BTSQpkZWYgY2VrZXIoaWRmLHB3KToKCWdsb2JhbCBjcAoJdWEgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDguMS4wOyBTNDVCKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTYuMC40NjY0LjQ1IE1vYmlsZSBTYWZhcmkvNTM3LjM2JwoJaGVhZCA9IHsiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCJvcmlnaW4iOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsInVzZXItYWdlbnQiOiB1YSwiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLCJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLCJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsInNlYy1mZXRjaC11c2VyIjogIj8xIiwic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLCJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9CglzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKCXRyeToKCQloaSA9IHNlcy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScpCgkJaG8gPSBzb3Aoc2VzLnBvc3QoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi5waHAnLCBkYXRhPXsnZW1haWwnOmlkZiwncGFzcyc6cHcsJ2xvZ2luJzonc3VibWl0J30sIGhlYWRlcnM9aGVhZCwgYWxsb3dfcmVkaXJlY3RzPVRydWUpLnRleHQsJ2h0bWwucGFyc2VyJykKCQlqbyA9IGhvLmZpbmQoJ2Zvcm0nKQoJCWRhdGEgPSB7fQoJCWxpb24gPSBbJ25oJywnamF6b2VzdCcsJ2ZiX2R0c2cnLCdzdWJtaXRbQ29udGludWVdJywnY2hlY2twb2ludF9kYXRhJ10KCQlmb3IgYW5qIGluIGpvKCdpbnB1dCcpOgoJCQlpZiBhbmouZ2V0KCduYW1lJykgaW4gbGlvbjoKCQkJCWRhdGEudXBkYXRlKHthbmouZ2V0KCduYW1lJyk6YW5qLmdldCgndmFsdWUnKX0pCgkJa2VudCA9IHNvcChzZXMucG9zdCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJytzdHIoam9bJ2FjdGlvbiddKSwgZGF0YT1kYXRhLCBoZWFkZXJzPWhlYWQpLnRleHQsJ2h0bWwucGFyc2VyJykKCQlwcmludCgnXHIlcysrKysgJXN8JXMgLS0tLT4gQ1AgICAgICAgJXMnJShiLGlkZixwdyx4KSkKCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQljcCs9MQoJCW9wc2kgPSBrZW50LmZpbmRfYWxsKCdvcHRpb24nKQoJCWlmIGxlbihvcHNpKT09MDoKCQkJcHJpbnQoJ1xyJXMtLS0+IFRhcCBZZXMgLyBBMkYgKENlayBMb2dpbiBEaSBMaXRlL01iYXNpYyVzKSclKGhoLHgpKQoJCWVsc2U6CgkJCWZvciBvcHNpaSBpbiBvcHNpOgoJCQkJcHJpbnQoJ1xyJXMtLS0+ICVzJXMnJShrayxvcHNpaS50ZXh0LHgpKQoJZXhjZXB0IEV4Y2VwdGlvbiBhcyBjOgoJCXByaW50KCdcciVzKysrKyAlc3wlcyAtLS0tPiBDUCAgICAgICAlcyclKGIsaWRmLHB3LHgpKQoJCXByaW50KCdcciVzLS0tPiBUaWRhayBEYXBhdCBNZW5nZWNlayBPcHNpIChDZWsgTG9naW4gRGkgTGl0ZS9NYmFzaWMpJXMnJSh1LHgpKQoJCW9wZW4oJ0NQLycrY3BjLCdhJykud3JpdGUoaWRmKyd8JytwdysnXG4nKQoJCWNwKz0xCgojIE9QU0kgQ0VLRVIKZGVmIGNla19vcHNpKCk6CgljID0gbGVuKGFrdW4pCglodSA9ICdUZXJkYXBhdCAlcyBBa3VuIFVudHVrIERpY2VrXG5TZWJlbHVtIE11bGFpLCBNb2RlIFBlc2F3YXQvVWJhaCBLYXJ0dSBTaW0gVGVybGViaWggRGFodWx1JyUoYykKCWNldGFrKG5lbChodSwgdGl0bGU9J0NFSyBPUFNJJykpCglpbnB1dCh4KydbJytoKyfigKInK3grJ10gTXVsYWknKQoJY2VrID0gJyMgUFJPU0VTIENFSyBPUFNJIERJTVVMQUknCglzb2woKS5wcmludChtYXJrKGNlaywgc3R5bGU9J2dyZWVuJykpCglsb3ZlID0gMAoJZm9yIGtlcyBpbiBha3VuOgoJCXRyeToKCQkJdHJ5OgoJCQkJaWQscHcgPSBrZXMuc3BsaXQoJ3wnKVswXSxrZXMuc3BsaXQoJ3wnKVsxXQoJCQlleGNlcHQgSW5kZXhFcnJvcjoKCQkJCXRpbWUuc2xlZXAoMikKCQkJCXByaW50KCdcciVzKysrKyAlcyAtLS0tPiBFcnJvciAgICAgICVzJyUoYixrZXMseCkpCgkJCQlwcmludCgnXHIlcy0tLT4gUGVtaXNhaCBUaWRhayBEaWR1a3VuZyBVbnR1ayBQcm9ncmFtIEluaSVzJyUodSx4KSkKCQkJCWNvbnRpbnVlCgkJCWJpID0gcmFuZG9tLmNob2ljZShbdSxrLGtrLGIsaCxoaF0pCgkJCXByaW50KCdcciVzLS0tPiAlcy8lcyAtLS0+IHsgJXMgfSVzJyUoYmksbG92ZSxsZW4oYWt1biksaWQseCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQoJCQl1YSA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IFM0NUIpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Ni4wLjQ2NjQuNDUgTW9iaWxlIFNhZmFyaS81MzcuMzYnCgkJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJCQloZWFkZXIgPSB7Ikhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwib3JpZ2luIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIsImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ1c2VyLWFnZW50IjogdWEsImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsInNlYy1mZXRjaC1zaXRlIjogInNhbWUtb3JpZ2luIiwic2VjLWZldGNoLW1vZGUiOiAibmF2aWdhdGUiLCJzZWMtZmV0Y2gtdXNlciI6ICI/MSIsInNlYy1mZXRjaC1kZXN0IjogImRvY3VtZW50IiwicmVmZXJlciI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifQoJCQloaSA9IHNlcy5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScpCgkJCWhvID0gc29wKHNlcy5wb3N0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4ucGhwJywgZGF0YT17J2VtYWlsJzppZCwncGFzcyc6cHcsJ2xvZ2luJzonc3VibWl0J30sIGhlYWRlcnM9aGVhZGVyLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkudGV4dCwnaHRtbC5wYXJzZXInKQoJCQlpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCQl0cnk6CgkJCQkJam8gPSBoby5maW5kKCdmb3JtJykKCQkJCQlkYXRhID0ge30KCQkJCQlsaW9uID0gWyduaCcsJ2phem9lc3QnLCdmYl9kdHNnJywnc3VibWl0W0NvbnRpbnVlXScsJ2NoZWNrcG9pbnRfZGF0YSddCgkJCQkJZm9yIGFuaiBpbiBqbygnaW5wdXQnKToKCQkJCQkJaWYgYW5qLmdldCgnbmFtZScpIGluIGxpb246CgkJCQkJCQlkYXRhLnVwZGF0ZSh7YW5qLmdldCgnbmFtZScpOmFuai5nZXQoJ3ZhbHVlJyl9KQoJCQkJCWtlbnQgPSBzb3Aoc2VzLnBvc3QoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScrc3RyKGpvWydhY3Rpb24nXSksIGRhdGE9ZGF0YSwgaGVhZGVycz1oZWFkZXIpLnRleHQsJ2h0bWwucGFyc2VyJykKCQkJCQlwcmludCgnXHIlcysrKysgJXN8JXMgLS0tLT4gQ1AgICAgICAgJXMnJShiLGlkLHB3LHgpKQoJCQkJCW9wc2kgPSBrZW50LmZpbmRfYWxsKCdvcHRpb24nKQoJCQkJCWlmIGxlbihvcHNpKT09MDoKCQkJCQkJcHJpbnQoJ1xyJXMtLS0+IFRhcCBZZXMgLyBBMkYgKENlayBMb2dpbiBEaSBMaXRlL01iYXNpYyVzKSclKGhoLHgpKQoJCQkJCWVsc2U6CgkJCQkJCWZvciBvcHNpaSBpbiBvcHNpOgoJCQkJCQkJcHJpbnQoJ1xyJXMtLS0+ICVzJXMnJShrayxvcHNpaS50ZXh0LHgpKQoJCQkJZXhjZXB0OgoJCQkJCXByaW50KCdcciVzKysrKyAlc3wlcyAtLS0tPiBDUCAgICAgICAlcyclKGIsaWQscHcseCkpCgkJCQkJcHJpbnQoJ1xyJXMtLS0+IFRpZGFrIERhcGF0IE1lbmdlY2VrIE9wc2klcyclKHUseCkpCgkJCWVsaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCQlwcmludCgnXHIlcysrKysgJXN8JXMgLS0tLT4gT0sgICAgICAgJXMnJShoLGlkLHB3LHgpKQoJCQllbHNlOgoJCQkJcHJpbnQoJ1xyJXMrKysrICVzfCVzIC0tLS0+IFNBTEFIICAgICAgICVzJyUoeCxpZCxwdyx4KSkKCQkJbG92ZSs9MQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJcHJpbnQoJycpCgkJCWxpID0gJyMgS09ORUtTSSBJTlRFUk5FVCBCRVJNQVNBTEFILCBQRVJJS1NBICYgQ09CQSBMQUdJJwoJCQlzb2woKS5wcmludChtYXJrKGxpLCBzdHlsZT0ncmVkJykpCgkJCWV4aXQoKQoJZGFoID0gJyMgRE9ORScKCXNvbCgpLnByaW50KG1hcmsoZGFoLCBzdHlsZT0nZ3JlZW4nKSkKCWV4aXQoKQoKaWYgX19uYW1lX189PSdfX21haW5fXyc6Cgl0cnk6b3MubWtkaXIoJ0NQJykKCWV4Y2VwdDpwYXNzCgl0cnk6b3MubWtkaXIoJ09LJykKCWV4Y2VwdDpwYXNzCglvcy5zeXN0ZW0oJ2dpdCBwdWxsJykKCWxvZ2luKCkK"))